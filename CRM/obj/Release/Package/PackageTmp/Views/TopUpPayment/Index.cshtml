@model  System.Data.DataTable

@{
    ViewBag.Title = "Index";
    Layout = null;// "~/Views/Shared/_AdminLayout.cshtml";
}

@*<!-- DataTables -->
<link href="../../plugins/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="../../plugins/datatables/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<!-- Responsive datatable examples -->
<link href="../../plugins/datatables/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css" />*@
<style>
    .table {
        text-align: center;
    }
</style>
<div class="row">
    <div class="col-lg-12 col-sm-12">
        <div class="card">
            <div class="card-body table-responsive">
                <div class="modal fade" id="popuptopupChrge" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="width:100%">
                    <div class="modal-dialog  modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title feedbackPopup-heading" id="exampleModalLabel">Top Request Charge</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-md-6">Script Charges</div>
                                    <div class="col-md-6"><input type="text" class="ScriptCharges form-control" /></div>

                                </div>
                                <div class="row">
                                    <div class="col-md-6"> Vioce Over Charges</div>
                                    <div class="col-md-6"><input type="text" class="VioceOverCharges form-control" /></div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">Video Charges</div>
                                    <div class="col-md-6"><input type="text" class="VideoCharges form-control" /></div>
                                </div>
                            </div>


                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary updatePrice UpdateTopUpPrice" data-TopUpPaymentId="0" data-dismiss="modal">Save</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="">
                    <table id="datatable2" class="table dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                        <thead>
                            <tr>
                                @foreach (System.Data.DataColumn col in Model.Columns)
                                {

                                    <th>@col.ColumnName</th>

                                }
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (System.Data.DataRow row in Model.Rows)
                            {
                                <tr>
                                    @foreach (System.Data.DataColumn col in Model.Columns)
                                    {

                                        <td>@row[col.ColumnName]</td>

                                    }
                                    <td><div class="btn btn-sm btn-round btn-block waves-effect waves-light" data-toggle="modal" data-target="#popuptopupChrge" onclick="OpenPopup(@row["TopUpPaymentId"],@row["ScriptCharges"],@row["VioceOverCharges"],@row["VideoCharges"])">Set Charge</div></td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

@*<!-- Required datatable js -->
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/dataTables.bootstrap4.min.js"></script>
<!-- Buttons examples -->
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/dataTables.buttons.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/buttons.bootstrap4.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/jszip.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/pdfmake.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/vfs_fonts.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/buttons.html5.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/buttons.print.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/buttons.colVis.min.js"></script>
<!-- Responsive examples -->
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/dataTables.responsive.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/plugins/datatables/responsive.bootstrap4.min.js"></script>
<script src="~/Content/Theme/Crovex_v1.0/HTML/assets/pages/jquery.datatable.init.js"></script>*@

<script>
    TopUpPaymentId = 0;
    ScriptCharges = 0;
    VioceOverCharges = 0;
    VideoCharges = 0;
    $(document).ready(function () {
        $(".UpdateTopUpPrice").click(function () {
            var data = {
                TopUpPaymentId: parseInt($(".UpdateTopUpPrice").attr("data-TopUpPaymentId")),
                ScriptCharges: parseFloat($(".ScriptCharges").val()),
                VioceOverCharges: parseFloat($(".VioceOverCharges").val()),
                VideoCharges: parseFloat($(".VideoCharges").val())
            };

            $.ajax({
                type: "POST",
                url: "/TopUpPayment/UpdateTopUpPrice",
                data: JSON.stringify(data),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert(data);
                    callPage('/TopUpPayment/Index', 'Top Up Request', '');
                }
            });
        });

    });
    function OpenPopup(TopUpPaymentId, ScriptCharges, VioceOverCharges, VideoCharges) {
        TopUpPaymentId = TopUpPaymentId;
        $(".ScriptCharges").val(ScriptCharges);
        $(".VioceOverCharges").val(VioceOverCharges);
        $(".VideoCharges").val(VideoCharges);
        $(".UpdateTopUpPrice").attr("data-TopUpPaymentId", TopUpPaymentId);
    }
    
</script>